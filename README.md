# :smiley:MiSportStep

## MISportStep是什么

MiSportStep是一个使用GoLang实现的步数同步工具，原理为通过调用华米运动接口，通过给第三方(微信)同步步数，步数可以自定义设置，来达到刷微信步数的目的，可以使用github的action实现每天定时执行，随机生成范围步数。

## 怎么用

1. 确保手机上安装了小米运动

2. 使用手机号注册账号（注意一定要使用手机号注册）

3. 注册登录后到我的，找到第三方接入，选择微信，会有一个二维码，保存二维码到微信扫描绑定

4. 绑定成功后则可以使用本工具来刷入步数

5. 通过Fork本项目，然后找到Setting，添加Secret，加入以下环境变量，以下变量一定要填，否则无法执行

   | 变量名           | 注释                                          |
   | :--------------- | --------------------------------------------- |
   | XIAOMI_USER_INFO  | 该字段为JSON配置，详情详情如下              |

```json
[
   {
      "userName": "tom",
      "password": "123",
      "stepRang": "8000-9000"
   },
   {
      "userName": "jerry",
      "password": "556",
      "stepRang": "10000-12000"
   }
]
```
json配置可同时配置多个账号，`userName`为登录手机号，`password`为登录密码，`stepRang`为该账号要刷的步数范围

6. 修改定时任务时间，打开`.github/workflows/MI-SPORT-TASK.yml`文件，该文件是github执行action的文件，修改以下内容

   ```
   on:
     workflow_dispatch: # 手动触发
     schedule: # 计划任务触发 (UTC时区 H+8)
       - cron: "10 9 * * *"
   ```
   
   表达式`cron`中第一位表示分，第二位为时，则以上表达式可以看成每天的9点10分执行？其实不是，正确应该是每天的17点10分执行，因为美国时间与中国时间不一致，所以都使用世界标准时间UTC来表示，中国的时间比UTC要快8个小时，所以当你想每天的18点执行时，时那个地方就是18-8=10，所以上面每天17点执行会是9，17-8=9。
   
   

